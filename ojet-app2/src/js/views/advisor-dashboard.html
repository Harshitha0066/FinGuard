<div class="oj-flex oj-sm-flex-wrap oj-sm-margin-4x">

  <!-- ====================== Profile Card ====================== -->
  <div class="oj-sm-12 oj-md-3 oj-flex-item">
    <div class="card chart-card" style="padding: 20px; border-radius: 8px; background-color: #ffffff;display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 10px;">
      <div class="card-header" style="margin-bottom: 15px;">
          <h3 class="oj-typography-heading-sm oj-sm-margin-bottom">User Profile</h3>
      </div>
      <div class="oj-flex oj-sm-justify-content-center oj-sm-text-align-center">
        <div>
          <img class="avatar" src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Avatar" style="border-radius: 50%; width: 80px; height: 80px;" />
        </div>
      </div>
      <ul class="profile-list oj-sm-margin-top-2x" style="list-style: none; padding: 0; margin-top: 20px;">
        <li style="margin-bottom: 10px; gap: 10px;"><strong>Role: </strong> <span data-bind="text: roleId"></span></li>
        <li style="margin-bottom: 10px;  gap: 10px;"><strong>User Name: </strong> <span data-bind="text: username"></span></li>      
        <li style="margin-bottom: 10px;  gap: 10px;"><strong>Email: </strong> <span data-bind="text: email"></span></li>
      </ul>
    </div>
  </div>

  <!-- ====================== Portfolio Table ====================== -->
  <div class="oj-sm-12 oj-md-9 oj-flex-item">
   <!-- Portfolio Summary Table -->
<div class="oj-sm-margin-top-4x chart-card">
  <h3 class="oj-typography-heading-sm oj-sm-margin-bottom">Portfolio Overview</h3>

  <oj-table
    id="portfolioTable"
    data="[[portfolioTableDataProvider]]"
    selection-mode.row="single"
    display="grid"
    layout="fixed"
    style="width: 100%; max-width: 1000px; margin: auto;"
    columns='[
      {"headerText": "Portfolio Name", "field": "name"},
      {"headerText": "Description", "field": "description"},
      {"headerText": "User ID", "field": "userId"},
      {"headerText": "# Holdings", "field": "numHoldings"},
      {"headerText": "Total Value", "field": "totalValue"},
      {"headerText": "Created At", "field": "createdAt"},
      {"headerText": "Updated At", "field": "updatedAt"}
    ]'>
  </oj-table>
</div>

  </div>
</div>

<!-- ====================== Charts ====================== -->
<div class="oj-flex oj-sm-flex-wrap oj-sm-margin-top-4x oj-sm-margin-bottom">

  <!-- Pie Chart -->
  <div class="oj-flex-item chart-card">
    <h3 class="oj-typography-heading-sm oj-sm-margin-bottom">Total Investment Share</h3>
    <oj-chart
      id="pieChart"
      type="pie"
      data="[[pieDataProvider]]"
      animation-on-display="auto"
      animation-on-data-change="auto"
      hover-behavior="dim">
      <template slot="itemTemplate" data-oj-as="item">
        <oj-chart-item
          value="[[item.data.value]]"
          group-id="[[ [item.data.group] ]]"
          series-id="[[item.data.name]]">
        </oj-chart-item>
      </template>
    </oj-chart>
  </div>

  <!-- Bar Chart -->
  <div class="oj-flex-item chart-card">
    <h3 class="oj-typography-heading-sm oj-sm-margin-bottom">Investment Value per User</h3>
    <oj-chart
      type="bar"
      data="[[barDataProvider]]"
      animation-on-display="auto"
      animation-on-data-change="auto"
      orientation="vertical"
      style="height: 350px;">
      <template slot="itemTemplate" data-oj-as="item">
        <oj-chart-item
          group-id="[[item.data.user]]"
          series-id="[[item.data.s]]"
          value="[[item.data.value]]">
        </oj-chart-item>
      </template>
    </oj-chart>
  </div>

</div>

<!-- Line Chart -->
<div class="oj-sm-margin-top-4x chart-card">
  <h3 class="oj-typography-heading-sm oj-sm-margin-bottom">Purchase vs Current Price per Holding</h3>
  <oj-chart
    id="lineChart"
    type="line"
    data="[[lineDataProvider]]"
    animation-on-display="auto"
    animation-on-data-change="auto"
    orientation="vertical"
    style="width: 100%; height: 400px;">
    <template slot="itemTemplate" data-oj-as="item">
      <oj-chart-item
        group-id="[[item.data.group]]"
        series-id="[[item.data.series]]"
        value="[[item.data.value]]">
      </oj-chart-item>
    </template>
  </oj-chart>
</div>
